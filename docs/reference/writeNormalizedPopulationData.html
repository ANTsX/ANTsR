<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Save normalized population data to a directory or h5 file — writeNormalizedPopulationData • ANTsR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Save normalized population data to a directory or h5 file — writeNormalizedPopulationData" />
<meta property="og:description" content="This function simplifies the steps of saving a population (image) analysis
into an efficient hdf5 file, using the h5 library or to a directory.  The
population image data is stored as a matrix.  Along with the matrix will be a
data frame with population demographics. The number of matrix columns will be
defined by a mask that the user should also supply.  Finally, a boolean
vector should be passed in that matches the images to the demographics. This
function cannot check if the matching between demographics and images is
correct and, as such, the user should take care in creating the inputs.
WARNING: when using h5, the demographics file will currently be cast to a data.matrix so
one should not reuse this file as the reference demographics file." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ANTsR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.6.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ANTsR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/MultiChannel.html">Multichannel image proccessing</a>
    </li>
    <li>
      <a href="../articles/RestingBOLD.html">Resting BOLD (basic analyses using ANTsR)</a>
    </li>
    <li>
      <a href="../articles/antsrTransform.html">Using the antsrTransform class</a>
    </li>
    <li>
      <a href="../articles/deformationSimulation.html">Simulate a deformation field with ANTsR</a>
    </li>
    <li>
      <a href="../articles/iMath.html">iMath (mathematical operations inside ANTsR)</a>
    </li>
    <li>
      <a href="../articles/multivarTemplateCoordinates.html">multivariate template coordinates example for eigenanatomy</a>
    </li>
    <li>
      <a href="../articles/rfLesionSeg.html">Multi-resolution voxel-wise neighborhood random forest (MRV-NRF) lesion segmentation</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Save normalized population data to a directory or h5 file</h1>
    
    <div class="hidden name"><code>writeNormalizedPopulationData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function simplifies the steps of saving a population (image) analysis
into an efficient hdf5 file, using the h5 library or to a directory.  The
population image data is stored as a matrix.  Along with the matrix will be a
data frame with population demographics. The number of matrix columns will be
defined by a mask that the user should also supply.  Finally, a boolean
vector should be passed in that matches the images to the demographics. This
function cannot check if the matching between demographics and images is
correct and, as such, the user should take care in creating the inputs.
WARNING: when using h5, the demographics file will currently be cast to a data.matrix so
one should not reuse this file as the reference demographics file.</p>
    </div>

    <pre class="usage"><span class='fu'>writeNormalizedPopulationData</span>(
  <span class='no'>demographics</span>,
  <span class='no'>imageMat</span>,
  <span class='no'>imageMask</span>,
  <span class='no'>imageBoolean</span>,
  <span class='no'>filename</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>demographics</th>
      <td><p>data frame that identifies the variables of interest.</p></td>
    </tr>
    <tr>
      <th>imageMat</th>
      <td><p>a matrix that stores the normalized image data.</p></td>
    </tr>
    <tr>
      <th>imageMask</th>
      <td><p>mask with number of non-zero entries defining the matrix columns.</p></td>
    </tr>
    <tr>
      <th>imageBoolean</th>
      <td><p>a vector of booleans with length equal to the number of
rows in the demographics data frame and number of true values equal to the
number of rows in the image matrix.</p></td>
    </tr>
    <tr>
      <th>filename</th>
      <td><p>output filename for hdf5 file (if .h5) or directory name.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>successOrFailure boolean</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># read below will test out writing as well</span>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>ilist</span> <span class='kw'>=</span> <span class='fu'>getANTsRData</span>( <span class='st'>"population"</span> )
<span class='no'>mask</span> <span class='kw'>=</span> <span class='fu'>getMask</span>( <span class='no'>ilist</span><span class='kw'>[[</span> <span class='fl'>1</span> ]] )
<span class='no'>imat</span> <span class='kw'>=</span> <span class='fu'>imageListToMatrix</span>( <span class='no'>ilist</span>, <span class='no'>mask</span> )
<span class='no'>demog</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>( <span class='kw'>id</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>,<span class='fl'>NA</span>),
  <span class='kw'>age</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>( <span class='fl'>11</span>, <span class='fl'>7</span>, <span class='fl'>18</span>, <span class='fl'>22</span> ), <span class='kw'>sex</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>,<span class='st'>"M"</span>,<span class='st'>"F"</span>,<span class='st'>"F"</span>) )
<span class='no'>ibool</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>( <span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>, <span class='fl'>FALSE</span> )
<span class='no'>tfn</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>(<span class='kw'>fileext</span><span class='kw'>=</span><span class='st'>".h5"</span>)
<span class='kw'>if</span> ( <span class='fu'>usePkg</span>( <span class='st'>"hdf5r"</span> ) ) {
<span class='no'>demographics</span> <span class='kw'>=</span> <span class='no'>demog</span>
<span class='no'>imageMat</span> <span class='kw'>=</span> <span class='no'>imat</span>
<span class='no'>imageMask</span> <span class='kw'>=</span> <span class='no'>mask</span>
<span class='no'>imageBoolean</span> <span class='kw'>=</span> <span class='no'>ibool</span>
<span class='no'>filename</span> <span class='kw'>=</span> <span class='no'>tfn</span>
<span class='fu'>writeNormalizedPopulationData</span>( <span class='no'>demog</span>, <span class='no'>imat</span>, <span class='no'>mask</span>, <span class='no'>ibool</span>,
  <span class='no'>tfn</span> )
  }
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Brian B Avants.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


