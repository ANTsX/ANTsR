<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Apply transforms to images. — antsApplyTransforms • ANTsR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Apply transforms to images. — antsApplyTransforms"><meta property="og:description" content="Apply a transform list to map an image from one domain to another. In image
registration, one computes mappings between (usually) pairs of images.
These transforms are often a sequence of increasingly complex maps, e.g.
from translation, to rigid, to affine to deformation.  The list of such
transforms is passed to this function to interpolate one image domain
into the next image domain, as below.  The order matters strongly and the
user is advised to familiarize with the standards established in examples."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ANTsR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ANTsR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/MultiChannel.html">Multichannel image proccessing</a>
    </li>
    <li>
      <a href="../articles/RestingBOLD.html">Resting BOLD (basic analyses using ANTsR)</a>
    </li>
    <li>
      <a href="../articles/antsrTransform.html">Using the antsrTransform class</a>
    </li>
    <li>
      <a href="../articles/deformationSimulation.html">Simulate a deformation field with ANTsR</a>
    </li>
    <li>
      <a href="../articles/iMath.html">iMath (mathematical operations inside ANTsR)</a>
    </li>
    <li>
      <a href="../articles/multivarTemplateCoordinates.html">multivariate template coordinates example for eigenanatomy</a>
    </li>
    <li>
      <a href="../articles/simlr_interpretation.html">simlr_interpretation</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply transforms to images.</h1>
    
    <div class="hidden name"><code>antsApplyTransforms.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Apply a transform list to map an image from one domain to another. In image
registration, one computes mappings between (usually) pairs of images.
These transforms are often a sequence of increasingly complex maps, e.g.
from translation, to rigid, to affine to deformation.  The list of such
transforms is passed to this function to interpolate one image domain
into the next image domain, as below.  The order matters strongly and the
user is advised to familiarize with the standards established in examples.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">antsApplyTransforms</span><span class="op">(</span></span>
<span>  <span class="va">fixed</span>,</span>
<span>  <span class="va">moving</span>,</span>
<span>  transformlist <span class="op">=</span> <span class="st">""</span>,</span>
<span>  interpolator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"nearestNeighbor"</span>, <span class="st">"multiLabel"</span>, <span class="st">"gaussian"</span>, <span class="st">"bSpline"</span>,</span>
<span>    <span class="st">"cosineWindowedSinc"</span>, <span class="st">"welchWindowedSinc"</span>, <span class="st">"hammingWindowedSinc"</span>,</span>
<span>    <span class="st">"lanczosWindowedSinc"</span>, <span class="st">"genericLabel"</span><span class="op">)</span>,</span>
<span>  imagetype <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  whichtoinvert <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  compose <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>fixed</dt>
<dd><p>fixed image defining domain into which the moving image is
transformed.</p></dd>


<dt>moving</dt>
<dd><p>moving image to be mapped to fixed space.</p></dd>


<dt>transformlist</dt>
<dd><p>character vector of transforms generated by antsRegistration where
each transform is a filename.</p></dd>


<dt>interpolator</dt>
<dd><p>Choice of interpolator.  Supports partial matching.</p><ul><li><p>linear</p></li>
<li><p>nearestNeighbor</p></li>
<li><p>multiLabel for label images but genericlabel is preferred</p></li>
<li><p>gaussian</p></li>
<li><p>bSpline</p></li>
<li><p>cosineWindowedSinc</p></li>
<li><p>welchWindowedSinc</p></li>
<li><p>hammingWindowedSinc</p></li>
<li><p>lanczosWindowedSinc</p></li>
<li><p>genericLabel use this for label images</p></li>
</ul></dd>


<dt>imagetype</dt>
<dd><p>choose 0/1/2/3 mapping to scalar/vector/tensor/time-series</p></dd>


<dt>whichtoinvert</dt>
<dd><p>optional list of booleans, same length as transforms.
whichtoinvert[i] is TRUE if transformlist[i] is a matrix, and the matrix should
be inverted. If transformlist[i] is a warp field, whichtoinvert[i] must be FALSE.</p>
<p>If the transform list is a matrix followed by a warp field, whichtoinvert
defaults to c(TRUE,FALSE). Otherwise it defaults to rep(FALSE, length(transformlist)).</p></dd>


<dt>compose</dt>
<dd><p>if it is a character string pointing to a valid file location,
this will force the function to return a composite transformation filename.</p></dd>


<dt>verbose</dt>
<dd><p>print command and run verbose application of transform.</p></dd>


<dt>...</dt>
<dd><p>extra parameters</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>an antsImage or transformation filename is output. 1 -- Failure</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="antsRegistration.html">antsRegistration</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Shrinidhi KL, Avants BB</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># will give the full form of help</span></span></span>
<span class="r-in"><span><span class="fu">antsApplyTransforms</span><span class="op">(</span><span class="st">"-h"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span><span class="co"># see antsRegistration</span></span></span>
<span class="r-in"><span><span class="co"># example 1 - simplified</span></span></span>
<span class="r-in"><span><span class="va">fixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="ri.html">ri</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">moving</span> <span class="op">&lt;-</span> <span class="fu"><a href="ri.html">ri</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="resampleImage.html">resampleImage</a></span><span class="op">(</span><span class="va">fixed</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span>, <span class="fl">64</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">moving</span> <span class="op">&lt;-</span> <span class="fu"><a href="resampleImage.html">resampleImage</a></span><span class="op">(</span><span class="va">moving</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">68</span>, <span class="fl">68</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mytx</span> <span class="op">&lt;-</span> <span class="fu"><a href="antsRegistration.html">antsRegistration</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>  typeofTransform <span class="op">=</span> <span class="st">"SyN"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, printArgs <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> antsRegistration -d 2 -r [0x60000020ebe0,0x60000020ec00,1] -m mattes[0x60000020ebe0,0x60000020ec00,1,32,regular,0.2] -t Affine[0.25] -c 2100x1200x1200x0 -s 3x2x1x0 -f 4x2x2x1 -x [NA,NA] -m mattes[0x60000020ebe0,0x60000020ec00,1,32] -t SyN[0.2,3,0] -c [ 40x20x0 ,1e-7,8] -s 2x1x0 -f 4x2x1 -u 0 -z 1 -o [/tmp//Rtmp7EYtvZ/file951a5842cda3,0x60000020e920,0x60000020eb90] -x [NA,NA] --float 1 --random-seed 1 --write-composite-transform 0 -v 1 </span>
<span class="r-in"><span><span class="va">mywarpedimage</span> <span class="op">&lt;-</span> <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>  transformlist <span class="op">=</span> <span class="va">mytx</span><span class="op">$</span><span class="va">fwdtransforms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/logical-expectations.html" class="external-link">expect_true</a></span><span class="op">(</span><span class="fu"><a href="antsImagePhysicalSpaceConsistency.html">antsImagePhysicalSpaceConsistency</a></span><span class="op">(</span><span class="va">mywarpedimage</span>, <span class="va">fixed</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">invwarped_image</span> <span class="op">&lt;-</span> <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">moving</span>, moving <span class="op">=</span> <span class="va">fixed</span>,</span></span>
<span class="r-in"><span>  transformlist <span class="op">=</span> <span class="va">mytx</span><span class="op">$</span><span class="va">invtransforms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/logical-expectations.html" class="external-link">expect_true</a></span><span class="op">(</span><span class="fu"><a href="antsImagePhysicalSpaceConsistency.html">antsImagePhysicalSpaceConsistency</a></span><span class="op">(</span><span class="va">invwarped_image</span>, <span class="va">moving</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># full access via listing the inputs in standard ANTs format</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>  transformlist <span class="op">=</span> <span class="va">mytx</span><span class="op">$</span><span class="va">fwdtransforms</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  whichtoinvert <span class="op">=</span> <span class="fl">1</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "-d"                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2] "2"                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "-i"                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "&lt;pointer: 0x60000020ec20&gt;"                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "-o"                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "&lt;pointer: 0x60000020dc90&gt;"                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "-r"                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "&lt;pointer: 0x600000223730&gt;"                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "-n"                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "linear"                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "-t"                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] "[/tmp//Rtmp7EYtvZ/file951a5842cda30GenericAffine.mat,1]"</span>
<span class="r-in"><span><span class="va">cfile</span> <span class="op">&lt;-</span> <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>  transformlist <span class="op">=</span> <span class="va">mytx</span><span class="op">$</span><span class="va">fwdtransforms</span>,</span></span>
<span class="r-in"><span>  compose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cimg</span> <span class="op">&lt;-</span> <span class="fu"><a href="antsImageRead.html">antsImageRead</a></span><span class="op">(</span><span class="va">cfile</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cout</span> <span class="op">&lt;-</span> <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>  transformlist <span class="op">=</span> <span class="va">cimg</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>transformlist is an antsImage, creating a temporary file</span>
<span class="r-in"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/expect_error.html" class="external-link">expect_error</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>    fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>    transformlist <span class="op">=</span> <span class="va">cimg</span>, whichtoinvert <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>, <span class="st">"nnot invert transform"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>transformlist is an antsImage, creating a temporary file</span>
<span class="r-in"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/expect_error.html" class="external-link">expect_error</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>    fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>    transformlist <span class="op">=</span> <span class="va">cimg</span>, whichtoinvert <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>, <span class="st">"same length"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>transformlist is an antsImage, creating a temporary file</span>
<span class="r-in"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/expect_error.html" class="external-link">expect_error</a></span><span class="op">(</span><span class="fu">antsApplyTransforms</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fixed <span class="op">=</span> <span class="va">fixed</span>, moving <span class="op">=</span> <span class="va">moving</span>,</span></span>
<span class="r-in"><span>  transformlist <span class="op">=</span> <span class="st">""</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Brian B Avants.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

