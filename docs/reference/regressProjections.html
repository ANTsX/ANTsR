<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Regression on image set projection — regressProjections • ANTsR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Regression on image set projection — regressProjections"><meta property="og:description" content="Perform regression on a training set of images, projected onto (provided)
eigenvectors, and test on testing images."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ANTsR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ANTsR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/RestingBOLD.html">Resting BOLD (basic analyses using ANTsR)</a>
    </li>
    <li>
      <a href="../articles/deformationSimulation.html">Simulate a deformation field with ANTsR</a>
    </li>
    <li>
      <a href="../articles/iMath.html">iMath (mathematical operations inside ANTsR)</a>
    </li>
    <li>
      <a href="../articles/multivarTemplateCoordinates.html">multivariate template coordinates example for eigenanatomy</a>
    </li>
    <li>
      <a href="../articles/simlr_interpretation.html">simlr_interpretation</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Regression on image set projection</h1>
    
    <div class="hidden name"><code>regressProjections.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Perform regression on a training set of images, projected onto (provided)
eigenvectors, and test on testing images.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">regressProjections</span><span class="op">(</span></span>
<span>  <span class="va">input.train</span>,</span>
<span>  <span class="va">input.test</span>,</span>
<span>  <span class="va">demog.train</span>,</span>
<span>  <span class="va">demog.test</span>,</span>
<span>  <span class="va">eigenvectors</span>,</span>
<span>  <span class="va">mask</span>,</span>
<span>  <span class="va">outcome</span>,</span>
<span>  covariates <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>  model.function <span class="op">=</span> <span class="va">glm</span>,</span>
<span>  which.eigenvectors <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>input.train</dt>
<dd><p>Masked imaging data from training set of type
<code>antsImage</code> or <code>matrix</code>.  This will typically be read from a
<code>train.mha</code> file generated by, e.g., <code>sccan --imageset-to-matrix</code>.</p></dd>


<dt>input.test</dt>
<dd><p>Masked imaging data from testing set of type
<code>antsImage</code> or <code>matrix</code>.  This will typically be read from a
<code>test.mha</code> file generated by, e.g., <code>sccan --imageset-to-matrix</code>.</p></dd>


<dt>demog.train</dt>
<dd><p>Data frame of demographics information for training
images.</p></dd>


<dt>demog.test</dt>
<dd><p>Data frame of demographics information for testing images.</p></dd>


<dt>eigenvectors</dt>
<dd><p>List of eigenvector images for dimensionality reduction.</p></dd>


<dt>mask</dt>
<dd><p>Mask image of type <code>antsImage</code>.</p></dd>


<dt>outcome</dt>
<dd><p>Name of outcome variable to be predicted.  Must be present in
<code>demog.train</code> and <code>demog.test</code>.</p></dd>


<dt>covariates</dt>
<dd><p>List of names of covariates to be used for the prediction.
All names must be present in <code>demog.train</code> and <code>demog.test</code>.</p></dd>


<dt>model.function</dt>
<dd><p>Modeling function for predicting outcome from input
data.  Can be any function that has <code>formula</code> and <code>data</code> arguments
and a <code>predict</code> method.  Defaults to <code>glm</code>, but svm, randomForest,
etc. will also work (assuming necessary libraries are loaded).</p></dd>


<dt>which.eigenvectors</dt>
<dd><p>Method for selecting eigenvectors.  Can be either
<code>'all'</code> (uses all eigenvectors in <code>vector.names</code>) or
<code>'optimal'</code> (uses BIC stepwise model selection to select eigenvectors).
<code>'optimal'</code> only works for <code>model.function</code> arguments that include
an <code>extractAIC</code> method and a <code>coefficients</code> attribute.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments for input to <code>model.function</code>.  Example
input would be <code>family=binomial</code> for classification instead of
regression when using <code>glm</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list of diagnostic and statistical information generated from the
prediction, including: <code>stats</code>: Statistics on computed fits.  For
numeric outcomes, mean squared error, correlation coefficients, and p-value
of prediction for training and testing data.  For factor outcomes,
misclassification rate and p-value of classification model.
<code>outcome.comparison</code>: Data frame comparing real vs. predicted values
for testing data.  <code>eigenvectors</code>: List of eigenvectors retained in
model building.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>regressProjections</code> is a convenient way to perform training and
testing of predictions of demographic information from imaging data.  It
takes as input demographics information, imaging data, and eigenvectors, and
performs prediction of the outcome variable from the projection of the
imaging data on the eigenvectors.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="sparseDecom2.html">sparseDecom2</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Kandel BM and Avants B</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># generate simulated outcome</span></span></span>
<span class="r-in"><span><span class="va">nsubjects</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, length.out <span class="op">=</span> <span class="va">nsubjects</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">15</span>, length.out <span class="op">=</span> <span class="va">nsubjects</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outcome</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">x1</span> <span class="op">+</span> <span class="fl">4</span> <span class="op">*</span> <span class="va">x2</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># generate simulated images with outcome predicted</span></span></span>
<span class="r-in"><span><span class="co"># by sparse subset of voxels</span></span></span>
<span class="r-in"><span><span class="va">voxel.1</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">x1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">voxel.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">voxel.3</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">x2</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">voxel.4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nsubjects</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">voxel.1</span>, <span class="va">voxel.2</span>, <span class="va">voxel.3</span>, <span class="va">voxel.4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># simulate eigenvectors and mask</span></span></span>
<span class="r-in"><span><span class="va">mydecom</span> <span class="op">&lt;-</span> <span class="fu"><a href="sparseDecom.html">sparseDecom</a></span><span class="op">(</span><span class="va">input</span>, sparseness <span class="op">=</span> <span class="fl">0.25</span>, nvecs <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.antsImage.html">as.antsImage</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># generate sample demographics that do not explain outcome</span></span></span>
<span class="r-in"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nsubjects</span>, <span class="fl">50</span>, <span class="fl">75</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">demog</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="va">outcome</span>, age <span class="op">=</span> <span class="va">age</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># randomly divide data into training and testing</span></span></span>
<span class="r-in"><span><span class="va">data.split</span> <span class="op">&lt;-</span> <span class="fu"><a href="splitData.html">splitData</a></span><span class="op">(</span><span class="va">demog</span>, <span class="fl">2</span> <span class="op">/</span> <span class="fl">3</span>, return.rows <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eanatimages</span> <span class="op">&lt;-</span> <span class="fu"><a href="matrixToImages.html">matrixToImages</a></span><span class="op">(</span><span class="va">mydecom</span><span class="op">$</span><span class="va">eig</span>, <span class="va">mask</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">regressProjections</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">input</span><span class="op">[</span><span class="va">data.split</span><span class="op">$</span><span class="va">rows.in</span>, <span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">input</span><span class="op">[</span><span class="va">data.split</span><span class="op">$</span><span class="va">rows.out</span>, <span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">data.split</span><span class="op">$</span><span class="va">data.in</span>, <span class="va">data.split</span><span class="op">$</span><span class="va">data.out</span>,</span></span>
<span class="r-in"><span>  <span class="va">eanatimages</span>,</span></span>
<span class="r-in"><span>  <span class="va">mask</span>, <span class="st">"outcome"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Brian B Avants.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

