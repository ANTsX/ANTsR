% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/multiscaleSVDxpts.R
\name{safe_pca}
\alias{safe_pca}
\title{Safe PCA with Deterministic Bad-Column Repair}
\usage{
safe_pca(X, nc = min(dim(X)), center = TRUE, scale = TRUE)
}
\arguments{
\item{X}{A numeric matrix or data frame.}

\item{nc}{Number of components to return.}

\item{center}{Logical, whether to center columns.}

\item{scale}{Logical, whether to scale columns to unit variance.}
}
\value{
A list with the same structure as \code{\link[stats]{prcomp}},
        with rotation, sdev, x, etc.
}
\description{
Performs PCA after automatically detecting and fixing problematic columns
(e.g., zero variance, NA-only, partial NAs) in a deterministic way.
Ensures that the output dimensions match those from a clean dataset.
}
\examples{
set.seed(123)
mat <- matrix(rnorm(50), nrow = 10)
mat[, 3] <- 1  # zero variance col
mat[, 5] <- NA # all NA col
# result <- safe_pca(mat, nc = 3)
# result$rotation
}
