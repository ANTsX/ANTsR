# this directory should contain only Makefile, README and source
#
# unless you already built the website in which case it will also 
#
# contain a build directory.
#
# if you want to convert Rd files to rst, then do ( from this dir) 
# 
###############################################
function mysafetest {
    "$@"
    status=$?
    if [ $status -ne 0 ]; then
        echo "error with $1"
	exit 
    fi
    return $status
}
###############################################
ANTsRdoc=/Users/stnava/code/temp/antsr/ANTsR/doc
mysafetest cd $ANTsRdoc
mysafetest git checkout master
mysafetest ./scripts/convertRd2rst.sh
mysafetest cd source 
mysafetest ../scripts/convertRrst2rst.R 
mysafetest cd $ANTsRdoc
# 
# then to build the html, type: 
# 
mysafetest make html
mysafetest git commit -a -m "WIP: prepping for website update"
mysafetest git checkout gh-pages
mysafetest cd .. 
mysafetest cp -r doc/build/html/* .
mysafetest git add *html _sources/* _images/*
mysafetest git commit -a -m "WIP: website update"
mysafetest git push origin gh-pages
mysafetest git checkout master
